{% extends "base2.html" %}

{% block content %}

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.css" />
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.js"></script>
<script>
  $(document).ready(function(){
    // initialize a DataTable sorted by the date column 
    // in reverse chronological order by default. Break ties alphabetically by name. 
    new DataTable($('#pubplace'), {
      order: [[1, 'desc']],
     pageLength:5
    });
    new DataTable($('#sort_date'), {
      order: [[3, 'asc'],[1,'asc']],
        pageLength:5
    });
  })

</script>

<br>
<div class="site_body">
    <h3><b>{{pubplace}}</b></h3>
    <table class='table is-striped' id="pubplace">
        <thead class="grey_table" >
          <tr>
            <th scope="col">Publication Place</th>
            <th scope="col">Number of Sermons in EEBO-TCP</th>    
            <th scope="col">Standard</th>  
            <th scope="col">Edit Standard</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          {% for place,count in counts %}
          <tr>
              <td>{{place}}
              </td> 
              <td>{{count}}</td>
              <td>{{'; '.join(standard[place])}}
                <br>
                {% for p in standard[place] %}
                {% if p != pubplace %}
                <a href="{{ url_for('author.find_pubplace_metadata',pubplace=p)}}"><u>{{p}}</u></a>
                &VeryThinSpace;
                {% endif %}
                {% endfor %}
            </td>
            <td>
               <form action="{{ url_for('author.edit_pubplace',pubplace=pubplace)}}" method="POST" >
                <input type="hidden" id="old" name="old" value="{{'; '.join(standard[place])}}">
                <input type="text" id="new" name="new">
               </td><td> 
                <input type="submit" value="Submit" class="btn-gray"/> 
               </form> 
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
  <table class='table is-striped' id="sort_date">
    <thead class="grey_table" >
      <tr>
        <th scope="col">Title</th>
        <th scope="col">Authors</th>
        <th scope="col">Publisher</th>
        <th scope="col">Publication Year</th>
        <th scope="col">Publication Place</th>
        <th scope="col">Subjects</th>
        <th scope="col">ESTC ID</th>
        <th scope="col">STC ID</th>
        <th scope="col">TCP ID</th>
      </tr>
    </thead>
    <tbody>
      {% for s in sermons%}
        <tr>
          <td>
            <a href="{{ url_for('sermon.get_citations',tcpID=s.tcpID) }}"><b>{{s.title}}</b></a>
          </td>
          <td>
              {{s.authors}}
          </td>
          <td>{{s.publisher}}</td>
          <td>{{s.pubyear}}</td>
          <td>{{s.pubplace}}</td>
          <td>{{s.subject_headings}}</td>
          <td>{{s.estc}}</td>
          <td>{{s.stc}}</td>
          <td>{{s.tcpID}}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>



</div>


</div>

{% endblock %}
